<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pantalla de Color</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background-color: white;
            transition: background-color 0.5s ease;
        }
        #colorText {
            width: 100%;
            text-align: center;
            padding: 20px;
            font-size: 2em;
            background-color: rgba(0, 0, 0, 0.7); /* Fondo oscuro semi-transparente */
            color: white; /* Texto blanco */
            position: fixed;
            top: 0;
            left: 0;
        }
        #fullscreenButton {
            position: fixed;
            bottom: 20px;
            font-size: 1.5em;
            padding: 10px 20px;
            background-color: black;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="colorText">Burning Cold dice!!!: Cargando color...</div>

    <!-- Botón para activar pantalla completa -->
    <button id="fullscreenButton" onclick="launchFullScreen(document.documentElement)">Pantalla Completa</button>

    <!-- Firebase JS SDK (versión 8) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Configuración de Firebase (solo la URL de la base de datos)
        var firebaseConfig = {
            databaseURL: "https://colorburningcold-default-rtdb.firebaseio.com"
        };

        // Inicializamos Firebase
        firebase.initializeApp(firebaseConfig);

        // Conexión a la base de datos en tiempo real
        var database = firebase.database();
        var colorRef = database.ref('BurningApp/color');

        // Función para cambiar el color de fondo
        function cambiarColor(color) {
            console.log("Cambiando color a:", color);  // Depuración
            document.body.style.backgroundColor = color;
            document.getElementById('colorText').innerText = `Burning Cold dice!!!: ${color}`;
        }

        // Escuchar cambios en el valor del color en la base de datos
        colorRef.on('value', function(snapshot) {
            var color = snapshot.val();

            // Eliminar comillas dobles si están presentes
            color = color.replace(/['"]+/g, '');  // Elimina comillas

            console.log("Valor leído desde Firebase sin comillas:", color);  // Depuración
            switch (color) {
                case "Azul":
                    cambiarColor("blue");
                    break;
                case "Rojo":
                    cambiarColor("red");
                    break;
                case "Amarillo":
                    cambiarColor("yellow");
                    break;
                default:
                    cambiarColor("white");
                    break;
            }
        });

        // Forzar pantalla completa
        function launchFullScreen(element) {
            if (element.requestFullscreen) {
                element.requestFullscreen();
            } else if (element.mozRequestFullScreen) { // Firefox
                element.mozRequestFullScreen();
            } else if (element.webkitRequestFullscreen) { // Chrome, Safari, Opera
                element.webkitRequestFullscreen();
            } else if (element.msRequestFullscreen) { // IE/Edge
                element.msRequestFullscreen();
            }
        }
    </script>
</body>
</html>
