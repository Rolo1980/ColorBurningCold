<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pantalla de Color</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Centrar verticalmente */
            background-color: white;
            transition: background-color 0.5s ease;
            position: relative; /* Para manejar las posiciones de los elementos */
        }
        #colorText {
            width: 100%;
            text-align: center;
            padding: 10px;
            font-size: 1.5em; /* Tamaño de letra más pequeño */
            color: white; /* Texto blanco */
            position: absolute; /* Cambiado a absolute para no interferir con el contenido */
            top: 0;
            left: 0;
            display: none; /* Ocultamos inicialmente */
        }
        #fullscreenButton {
            position: absolute; /* Cambiado a absolute */
            bottom: 20px;
            font-size: 1.5em;
            padding: 10px 20px;
            background-color: black;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none; /* Ocultamos inicialmente */
        }
        #welcomeScreen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: absolute; /* Mantiene la pantalla de bienvenida en el centro */
            width: 100%;
            height: 100%;
            background-color: black; /* Fondo negro */
            color: white; /* Texto blanco */
            z-index: 10; /* Asegúrate de que esté encima */
            text-align: center; /* Centrar texto */
        }
        #welcomeLogo {
            max-width: 30%; /* Ajustar tamaño del logo a un 50% */
            height: auto; /* Mantener proporciones */
            margin-bottom: 20px;
        }
        #enterButton {
            padding: 10px 20px;
            font-size: 1.5em;
            background-color: white; /* Botón blanco */
            color: black; /* Texto negro */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px; /* Espacio superior */
        }
        #currentColor {
            position: absolute;
            bottom: 10px; /* Ajustar posición en la parte inferior */
            color: white; /* Color del texto */
            font-size: 1.2em; /* Tamaño de letra del color */
        }
    </style>
</head>
<body>
    <div id="welcomeScreen">
        <img id="welcomeLogo" src="https://github.com/Rolo1980/ColorBurningCold/raw/main/Logo%20burning.PNG" alt="Logo Burning Cold">
        <h1>¡Bienvenido a Burning Cold!</h1>
        <button id="enterButton" onclick="enterColorScreen()">Entrar</button>
        <div id="currentColor">Color actual: Cargando...</div> <!-- Mostrar color actual -->
    </div>

    <div id="colorText">Burning Cold dice!!!: Cargando color...</div>

    <!-- Botón para activar pantalla completa -->
    <button id="fullscreenButton" onclick="launchFullScreen(document.documentElement)">Pantalla Completa</button>

    <!-- Firebase JS SDK (versión 8) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Configuración de Firebase (solo la URL de la base de datos)
        var firebaseConfig = {
            databaseURL: "https://colorburningcold-default-rtdb.firebaseio.com"
        };

        // Inicializamos Firebase
        firebase.initializeApp(firebaseConfig);

        // Conexión a la base de datos en tiempo real
        var database = firebase.database();
        var colorRef = database.ref('BurningApp/color');

        // Función para cambiar el color de fondo
        function cambiarColor(color) {
            console.log("Cambiando color a:", color);  // Depuración
            document.body.style.backgroundColor = color;
            document.getElementById('colorText').innerText = `Burning Cold dice!!!: ${color}`;
            document.getElementById('currentColor').innerText = `Color actual: ${color}`; // Actualizar color actual
        }

        // Escuchar cambios en el valor del color en la base de datos
        colorRef.on('value', function(snapshot) {
            var color = snapshot.val();

            // Eliminar comillas dobles si están presentes
            color = color.replace(/['"]+/g, '');  // Elimina comillas

            console.log("Valor leído desde Firebase sin comillas:", color);  // Depuración
            switch (color) {
                case "Azul":
                    cambiarColor("blue");
                    break;
                case "Rojo":
                    cambiarColor("red");
                    break;
                case "Amarillo":
                    cambiarColor("yellow");
                    break;
                default:
                    cambiarColor("white");
                    break;
            }
        });

        // Función para entrar en la pantalla de colores
        function enterColorScreen() {
            document.getElementById('welcomeScreen').style.display = 'none'; // Ocultar pantalla de bienvenida
            document.getElementById('colorText').style.display = 'block'; // Mostrar texto de color
            document.getElementById('fullscreenButton').style.display = 'block'; // Mostrar botón de pantalla completa
        }

        // Forzar pantalla completa y ocultar botón
        function launchFullScreen(element) {
            if (element.requestFullscreen) {
                element.requestFullscreen();
            } else if (element.mozRequestFullScreen) { // Firefox
                element.mozRequestFullScreen();
            } else if (element.webkitRequestFullscreen) { // Chrome, Safari, Opera
                element.webkitRequestFullscreen();
            } else if (element.msRequestFullscreen) { // IE/Edge
                element.msRequestFullscreen();
            }

            // Ocultar el botón después de activar la pantalla completa
            document.getElementById('fullscreenButton').style.display = 'none';
        }

        // Mostrar el botón nuevamente cuando se salga del modo de pantalla completa
        document.addEventListener("fullscreenchange", function() {
            if (!document.fullscreenElement) {
                document.getElementById('fullscreenButton').style.display = 'block';
            }
        });
    </script>
</body>
</html>
